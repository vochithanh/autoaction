(this["webpackJsonpauto-react-app"]=this["webpackJsonpauto-react-app"]||[]).push([[0],{130:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(19),c=n.n(i),o=(n(92),n(69)),s=n.n(o),l=n(83),u=n(7),j=n(9),d=(n(94),n(84)),b=n.n(d),p=n(22),f=n(13),v=n(136),O=n(85),m=n(135),x=n(1);function h(e){var t,n=null===(t=e.list)||void 0===t?void 0:t.map((function(e,t){return Object(x.jsxs)(O.a,{xl:e.fill,children:[" ",e.comp," "]},e.key||t)}));return Object(x.jsxs)(m.a,Object(u.a)(Object(u.a)({},e.prpps),{},{children:[" ",n," "]}))}function S(e){var t=e.list.map((function(e,t){return{comp:e,fill:"12",key:t}}));return Object(x.jsx)(h,Object(u.a)(Object(u.a)({},e),{},{list:t}))}function g(e){var t=e.list.map((function(e,t){return{comp:e,fill:"auto",key:t}}));return Object(x.jsx)(h,Object(u.a)(Object(u.a)({},e),{},{list:t}))}var k=h;function P(e){return Object(x.jsxs)(v.a,{children:[e.bar,Object(x.jsx)(S,{list:[e.up,e.down]})," );"]})}var C=function(e){var t=Object(x.jsx)(S,{list:[e.right.up,e.right.down]}),n=[{comp:e.left,fill:2,key:"left"},{comp:t,fill:10,key:"right"}];return Object(x.jsxs)(v.a,{children:[e.bar,Object(x.jsx)(k,{list:n})]})},w=n(72),y=n(86);var E=function(){function e(e,t){for(var n=void 0!==(t=t||{}).prefix?t.prefix:"^",a=void 0!==t.suffix?t.suffix:"\\b",r=0;r<e.length;r++)e[r]instanceof RegExp?e[r]=e[r].source:e[r]=e[r].replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return new RegExp(n+"("+e.join("|")+")"+a,"i")}var t="(?=[^A-Za-z\\d\\-_]|$)",n=/[\w\-:]/,a=e([/begin|break|catch|continue|data|default|do|dynamicparam/,/else|elseif|end|exit|filter|finally|for|foreach|from|function|if|in/,/param|process|return|switch|throw|trap|try|until|where|while/,/Open|Click|Input|Search|Tab|Close|Area|Flag|Export|Table|Detect|Page|Fork/],{suffix:t}),r=e(["f",/b?not/,/[ic]?split/,"join",/is(not)?/,"as",/[ic]?(eq|ne|[gl][te])/,/[ic]?(not)?(like|match|contains)/,/[ic]?replace/,/b?(and|or|xor)/],{prefix:"-"}),i=e([r,/[+\-*\/%]=|\+\+|--|\.\.|[+\-*&^%:=!|\/]|<(?!#)|(?!#)>/],{suffix:""}),c=e([/Add-(Computer|Content|History|Member|PSSnapin|Type)/,/Checkpoint-Computer/,/Clear-(Content|EventLog|History|Host|Item(Property)?|Variable)/,/Compare-Object/,/Complete-Transaction/,/Connect-PSSession/,/ConvertFrom-(Csv|Json|SecureString|StringData)/,/Convert-Path/,/ConvertTo-(Csv|Html|Json|SecureString|Xml)/,/Copy-Item(Property)?/,/Debug-Process/,/Disable-(ComputerRestore|PSBreakpoint|PSRemoting|PSSessionConfiguration)/,/Disconnect-PSSession/,/Enable-(ComputerRestore|PSBreakpoint|PSRemoting|PSSessionConfiguration)/,/(Enter|Exit)-PSSession/,/Export-(Alias|Clixml|Console|Counter|Csv|FormatData|ModuleMember|PSSession)/,/ForEach-Object/,/Format-(Custom|List|Table|Wide)/,new RegExp("Get-(Acl|Alias|AuthenticodeSignature|ChildItem|Command|ComputerRestorePoint|Content|ControlPanelItem|Counter|Credential|Culture|Date|Event|EventLog|EventSubscriber|ExecutionPolicy|FormatData|Help|History|Host|HotFix|Item|ItemProperty|Job|Location|Member|Module|PfxCertificate|Process|PSBreakpoint|PSCallStack|PSDrive|PSProvider|PSSession|PSSessionConfiguration|PSSnapin|Random|Service|TraceSource|Transaction|TypeData|UICulture|Unique|Variable|Verb|WinEvent|WmiObject)"),/Group-Object/,/Import-(Alias|Clixml|Counter|Csv|LocalizedData|Module|PSSession)/,/ImportSystemModules/,/Invoke-(Command|Expression|History|Item|RestMethod|WebRequest|WmiMethod)/,/Join-Path/,/Limit-EventLog/,/Measure-(Command|Object)/,/Move-Item(Property)?/,new RegExp("New-(Alias|Event|EventLog|Item(Property)?|Module|ModuleManifest|Object|PSDrive|PSSession|PSSessionConfigurationFile|PSSessionOption|PSTransportOption|Service|TimeSpan|Variable|WebServiceProxy|WinEvent)"),/Out-(Default|File|GridView|Host|Null|Printer|String)/,/Pause/,/(Pop|Push)-Location/,/Read-Host/,/Receive-(Job|PSSession)/,/Register-(EngineEvent|ObjectEvent|PSSessionConfiguration|WmiEvent)/,/Remove-(Computer|Event|EventLog|Item(Property)?|Job|Module|PSBreakpoint|PSDrive|PSSession|PSSnapin|TypeData|Variable|WmiObject)/,/Rename-(Computer|Item(Property)?)/,/Reset-ComputerMachinePassword/,/Resolve-Path/,/Restart-(Computer|Service)/,/Restore-Computer/,/Resume-(Job|Service)/,/Save-Help/,/Select-(Object|String|Xml)/,/Send-MailMessage/,new RegExp("Set-(Acl|Alias|AuthenticodeSignature|Content|Date|ExecutionPolicy|Item(Property)?|Location|PSBreakpoint|PSDebug|PSSessionConfiguration|Service|StrictMode|TraceSource|Variable|WmiInstance)"),/Show-(Command|ControlPanelItem|EventLog)/,/Sort-Object/,/Split-Path/,/Start-(Job|Process|Service|Sleep|Transaction|Transcript)/,/Stop-(Computer|Job|Process|Service|Transcript)/,/Suspend-(Job|Service)/,/TabExpansion2/,/Tee-Object/,/Test-(ComputerSecureChannel|Connection|ModuleManifest|Path|PSSessionConfigurationFile)/,/Trace-Command/,/Unblock-File/,/Undo-Transaction/,/Unregister-(Event|PSSessionConfiguration)/,/Update-(FormatData|Help|List|TypeData)/,/Use-Transaction/,/Wait-(Event|Job|Process)/,/Where-Object/,/Write-(Debug|Error|EventLog|Host|Output|Progress|Verbose|Warning)/,/cd|help|mkdir|more|oss|prompt/,/ac|asnp|cat|cd|chdir|clc|clear|clhy|cli|clp|cls|clv|cnsn|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|dnsn|ebp/,/echo|epal|epcsv|epsn|erase|etsn|exsn|fc|fl|foreach|ft|fw|gal|gbp|gc|gci|gcm|gcs|gdr|ghy|gi|gjb|gl|gm|gmo|gp|gps/,/group|gsn|gsnp|gsv|gu|gv|gwmi|h|history|icm|iex|ihy|ii|ipal|ipcsv|ipmo|ipsn|irm|ise|iwmi|iwr|kill|lp|ls|man|md/,/measure|mi|mount|move|mp|mv|nal|ndr|ni|nmo|npssc|nsn|nv|ogv|oh|popd|ps|pushd|pwd|r|rbp|rcjb|rcsn|rd|rdr|ren|ri/,/rjb|rm|rmdir|rmo|rni|rnp|rp|rsn|rsnp|rujb|rv|rvpa|rwmi|sajb|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls/,/sort|sp|spjb|spps|spsv|start|sujb|sv|swmi|tee|trcm|type|where|wjb|write/],{prefix:"",suffix:""}),o=e([/[$?^_]|Args|ConfirmPreference|ConsoleFileName|DebugPreference|Error|ErrorActionPreference|ErrorView|ExecutionContext/,/FormatEnumerationLimit|Home|Host|Input|MaximumAliasCount|MaximumDriveCount|MaximumErrorCount|MaximumFunctionCount/,/MaximumHistoryCount|MaximumVariableCount|MyInvocation|NestedPromptLevel|OutputEncoding|Pid|Profile|ProgressPreference/,/PSBoundParameters|PSCommandPath|PSCulture|PSDefaultParameterValues|PSEmailServer|PSHome|PSScriptRoot|PSSessionApplicationName/,/PSSessionConfigurationName|PSSessionOption|PSUICulture|PSVersionTable|Pwd|ShellId|StackTrace|VerbosePreference/,/WarningPreference|WhatIfPreference/,/Event|EventArgs|EventSubscriber|Sender/,/Matches|Ofs|ForEach|LastExitCode|PSCmdlet|PSItem|PSSenderInfo|This/,/true|false|null/],{prefix:"\\$",suffix:""}),s={keyword:a,number:/^((0x[\da-f]+)|((\d+\.\d+|\d\.|\.\d+|\d+)(e[\+\-]?\d+)?))[ld]?([kmgtp]b)?/i,operator:i,builtin:e([/[A-Z]:|%|\?/i,c,o],{suffix:t}),punctuation:/[\[\]{},;`\.]|@[({]/,identifier:/^[A-Za-z\_][A-Za-z\-\_\d]*\b/};function l(e,t){var a=t.returnStack[t.returnStack.length-1];if(a&&a.shouldReturnFrom(t))return t.tokenize=a.tokenize,t.returnStack.pop(),t.tokenize(e,t);if(e.eatSpace())return null;if(e.eat("("))return t.bracketNesting+=1,"punctuation";if(e.eat(")"))return t.bracketNesting-=1,"punctuation";for(var r in s)if(e.match(s[r]))return r;var i=e.next();if("'"===i)return function(e,t){var n;for(;null!=(n=e.peek());)if(e.next(),"'"===n&&!e.eat("'"))return t.tokenize=l,"string";return"error"}(e,t);if("$"===i)return v(e,t);if('"'===i)return u(e,t);if("<"===i&&e.eat("#"))return t.tokenize=f,f(e,t);if("#"===i)return e.skipToEnd(),"comment";if("@"===i){var c=e.eat(/["']/);if(c&&e.eol())return t.tokenize=m,t.startQuote=c[0],m(e,t);if(e.eol())return"error";if(e.peek().match(/[({]/))return"punctuation";if(e.peek().match(n))return v(e,t)}return"error"}function u(e,t){for(var n;null!=(n=e.peek());){if("$"===n)return t.tokenize=j,"string";if(e.next(),"`"!==n){if('"'===n&&!e.eat('"'))return t.tokenize=l,"string"}else e.next()}return"error"}function j(e,t){return p(e,t,u)}function d(e,t){return t.tokenize=m,t.startQuote='"',m(e,t)}function b(e,t){return p(e,t,d)}function p(e,t,n){if(e.match("$(")){var a=t.bracketNesting;return t.returnStack.push({shouldReturnFrom:function(e){return e.bracketNesting===a},tokenize:n}),t.tokenize=l,t.bracketNesting+=1,"punctuation"}return e.next(),t.returnStack.push({shouldReturnFrom:function(){return!0},tokenize:n}),t.tokenize=v,t.tokenize(e,t)}function f(e,t){for(var n,a=!1;null!=(n=e.next());){if(a&&">"==n){t.tokenize=l;break}a="#"===n}return"comment"}function v(e,t){var a=e.peek();return e.eat("{")?(t.tokenize=O,O(e,t)):void 0!=a&&a.match(n)?(e.eatWhile(n),t.tokenize=l,"variable-2"):(t.tokenize=l,"error")}function O(e,t){for(var n;null!=(n=e.next());)if("}"===n){t.tokenize=l;break}return"variable-2"}function m(e,t){var n=t.startQuote;if(e.sol()&&e.match(new RegExp(n+"@")))t.tokenize=l;else if('"'===n)for(;!e.eol();){var a=e.peek();if("$"===a)return t.tokenize=b,"string";e.next(),"`"===a&&e.next()}else e.skipToEnd();return"string"}return{startState:function(){return{returnStack:[],bracketNesting:0,tokenize:l}},token:function(e,t){return t.tokenize(e,t)},blockCommentStart:"<#",blockCommentEnd:"#>",lineComment:"#",fold:"brace"}},T=(n(115),n(116),n(148)),D=n(145),I=n(137),A=n(138),F=n(142),R=n(144),M=n(143),L=n(149),z=n(150),H=n(146),W=n(88),N=n(139),V=n(140),B=n(147),J=n(141),$=n(43),U={size:"2em"},_=Object(x.jsx)($.a,Object(u.a)({},U)),q=Object(x.jsx)($.b,Object(u.a)({},U)),G=Object(x.jsx)($.e,Object(u.a)({},U)),K=Object(x.jsx)($.c,Object(u.a)({},U));$.d,Object(u.a)({},U),n(117),n(118);function Z(e){var t,n=null===(t=e.list)||void 0===t?void 0:t.map((function(t,n){var a=t.comp,r=t.label;return Object(x.jsxs)(T.a,Object(u.a)(Object(u.a)({body:!0},e.ip),{},{children:[a,r&&Object(x.jsx)(T.a.Text,{children:r})]}))}));return Object(x.jsx)(g,{list:n})}function Q(e){var t,n=null===(t=e.list)||void 0===t?void 0:t.map((function(e,t){var n=t+"";return Object(x.jsxs)(T.a,{children:[Object(x.jsx)(T.a.Header,{children:Object(x.jsx)(D.a.Toggle,{as:I.a,variant:"link",eventKey:n,children:e.label})}),Object(x.jsx)(D.a.Collapse,{eventKey:n,children:Object(x.jsx)(T.a.Body,{children:e.comp})})]},e.label)}));return Object(x.jsx)(D.a,{children:n})}function X(e){var t=Object(u.a)({placement:"right",delay:{show:250,hide:1e3}},e.oprops);return t.overlay=function(t){return Object(x.jsx)(A.a,Object(u.a)(Object(u.a)({},t),{},{children:e.oComp}))},Object(x.jsx)(F.a,Object(u.a)(Object(u.a)({},t),{},{children:e.children}))}function Y(e){var t=function(){return e.close()},n=Object(x.jsx)(I.a,{variant:"secondary",onClick:t,children:"Cancel"},"cancel"),a=Object(x.jsx)(I.a,{variant:"primary",onClick:function(){e.action(),t()},children:"Yes"},"yes");return Object(x.jsxs)(M.a,{show:e.show,onHide:t,children:[Object(x.jsx)(M.a.Header,{closeButton:!0,children:Object(x.jsx)(M.a.Title,{children:e.title})}),e.content&&Object(x.jsx)(M.a.Body,{children:e.content}),Object(x.jsx)(M.a.Footer,{children:[a,n]})]})}function ee(e){return Object(x.jsx)(I.a,Object(u.a)(Object(u.a)({},e),{},{children:K}))}function te(e){return Object(x.jsx)(oe,{icon:_,label:"New",link:e.link,action:e.action})}function ne(e){var t=Object(f.f)(),n=We(),a=Object(j.a)(n,2),r=a[0],i=(a[1],e.app),c={show:!0,title:"Delete item",content:"Are you sure?",action:function(){r({path:e.path,postAction:e.action||function(){e.app.refresh(),null===t||void 0===t||t.goBack()}})},close:function(){i.setApp(Object(u.a)(Object(u.a)({},i.app),{},{modal:{show:!1}}))}};return Object(x.jsx)(oe,{icon:q,label:"Delete",link:"#",action:function(){i.setApp(Object(u.a)(Object(u.a)({},i.app),{},{modal:c}))}})}function ae(e){var t,n=null===(t=e.items)||void 0===t?void 0:t.map((function(e,t){return Object(x.jsx)(p.b,{to:e.link,children:e.label},e.label)}));return Object(x.jsx)(L.a,{children:n})}function re(e){var t=e.list,n=null===t||void 0===t?void 0:t.map((function(t,n){var r;return Object(a.createElement)(z.a.Item,Object(u.a)(Object(u.a)({as:"div",action:!0,variant:"primary"},e.ip),{},{key:(null===(r=t.props)||void 0===r?void 0:r.label)||n}),t)}));return Object(x.jsxs)(z.a,Object(u.a)(Object(u.a)({},e.gp),{},{children:[e.header,n]}))}function ie(e){var t,n=Object(a.useState)(""),r=Object(j.a)(n,2),i=r[0],c=r[1],o=Object(x.jsx)(R.a.Control,{type:"text",placeholder:"Search...",onChange:function(e){c(e.target.value)}}),s=null===(t=e.list)||void 0===t?void 0:t.filter((function(e){var t;return function(e,t){return 0==e.length||(null===t||void 0===t?void 0:t.toLowerCase().indexOf(e.toLowerCase()))>=0}(i,null===e||void 0===e||null===(t=e.props)||void 0===t?void 0:t.label)})),l=Object(x.jsx)(re,Object(u.a)(Object(u.a)({},e),{},{list:s}));return Object(x.jsx)(S,{list:[o,l]})}function ce(e){return Object(x.jsx)(H.a,Object(u.a)(Object(u.a)({},e.style),{},{children:e.list}))}function oe(e){var t=e.icon?e.icon:e.label,n=Object(x.jsx)(p.b,{to:e.link,children:t}),a=Object(x.jsxs)(W.a.Link,{href:e.link,onSelect:e.action,children:[t," "]}),r=e.action?a:n;return Object(x.jsx)(W.a.Item,{children:r})}function se(e){var t,n=null===(t=e.items)||void 0===t?void 0:t.map((function(e,t){return Object(x.jsx)(N.a,{title:e.label,eventKey:e.label,children:e.comp},t)}));return Object(x.jsx)(V.a,Object(u.a)(Object(u.a)({},e.props),{},{children:n}))}function le(e){var t=Object(f.f)(),n=e.label?e.label:"Back";return Object(x.jsx)("button",{onClick:function(){t.goBack()},children:n})}function ue(e){return Object(x.jsx)(R.a,{onSubmit:e.submit,method:"post",encType:e.type||"multipart/form-data",id:e.id,children:e.inner})}function je(e){var t=Object(a.useState)(""),n=Object(j.a)(t,2),r=n[0],i=n[1],c=e.name;return Object(a.useEffect)((function(){i(e.value)}),[e.value]),Object(x.jsxs)(R.a.Group,{as:m.a,children:[Object(x.jsx)(R.a.Label,{column:!0,sm:2,children:e.label}),Object(x.jsx)(O.a,{sm:10,children:Object(x.jsx)(R.a.Control,{type:e.type,name:c,placeholder:e.tip,value:r,onChange:function(t){var n=t.target.value;e.setValue&&e.setValue(n),i(n)}})})]})}function de(e){return Object(x.jsx)(I.a,{variant:"primary",type:"submit",children:e.value})}function be(e){return Object(x.jsxs)(B.a,{onClose:function(){return e.setShow(!1)},show:e.show,delay:3e3,autohide:!0,children:[Object(x.jsx)(B.a.Header,{children:Object(x.jsx)("strong",{className:"mr-auto",children:e.title||""})}),e.content&&Object(x.jsx)(B.a.Body,{children:e.content})]})}function pe(e){var t=Object(a.useState)(e.script),n=Object(j.a)(t,2),r=n[0],i=n[1],c=e.name;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(y.UnControlled,{value:e.script,options:{mode:"autoaction",theme:"eclipse",lineNumbers:!0},defineMode:{name:"autoaction",fn:E},onChange:function(e,t,n){i(n)}}),Object(x.jsx)("textarea",{name:c,hidden:!0,value:r,readOnly:!0})]})}function fe(e){var t,n=null===(t=e.list)||void 0===t?void 0:t.map((function(e){return Object(x.jsx)(w.a.Item,{children:Object(x.jsx)(ve,Object(u.a)({},e))},e.path)}));return Object(x.jsx)(w.a,{children:n})}function ve(e){var t=e.path,n=Object(x.jsx)("img",{src:t,alt:"",className:"d-block w-100"});return t.endsWith(".png")?n:Object(x.jsx)("div",{})}function Oe(e){var t=e.path,n=e.style,a=Object(x.jsx)(J.a,{aspectRatio:"16by9",children:Object(x.jsx)("embed",{type:"image/svg+xml",src:t})});return Object(x.jsx)("div",{style:n,children:a})}function me(e){var t=e.db.scripts,n=Object(a.useState)(e.ids),r=Object(j.a)(n,2),i=r[0],c=r[1],o=function(e){return(null===i||void 0===i?void 0:i.indexOf(e.id))>=0},s=t.filter((function(e){return!o(e)})).map((function(e){return Object(x.jsx)(he,{label:e.data.name,model:e,action:function(){c((function(t){return t+","+e.id}))}})})),l=Object(x.jsx)(ie,{list:s}),u=Object(x.jsx)(Q,{list:[{label:"Add script",comp:l}]}),d=t.filter(o).sort((function(e,t){return i.indexOf(e.id)-i.indexOf(t.id)})),b=Object(x.jsx)(xe,{scripts:d,name:e.name,action:function(e){c((function(t){return t.split(",").filter((function(t){return e!==t})).join(",")}))}});return Object(x.jsx)(S,{list:[u,b]})}function xe(e){var t=e.scripts,n=t.map((function(t){return Object(x.jsx)(X,{oComp:Object(x.jsx)(ee,{onClick:function(){e.action(t.id)}}),children:Object(x.jsx)("span",{children:t.data.name})})})),a=t.map((function(e){return e.id})).join(",")||"",r=Object(x.jsx)(je,{type:"hidden",value:a,name:e.name}),i=Object(x.jsx)(re,{list:n,ip:{variant:"warning"}});return Object(x.jsx)(S,{list:[r,i]})}function he(e){var t=e.model;return Object(x.jsx)(oe,{link:"#",action:e.action,label:null===t||void 0===t?void 0:t.data.name})}function Se(e){var t=e.model,n=Ne(),r=Object(j.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(!1),s=Object(j.a)(o,2),l=s[0],u=s[1];Object(a.useEffect)((function(){c&&(e.refresh(),e.setScript(c.data))}),[c]);var d=c&&Object(x.jsx)(be,{title:c.result,show:l,setShow:u}),b=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(je,{name:"data.name",type:"text",tip:"",value:t?t.data.name:"",label:"Script name"}),Object(x.jsx)(pe,{script:(null===t||void 0===t?void 0:t.data.script)||"",name:"data.script"}),Object(x.jsx)(de,{value:"Save"})]}),p=Object(x.jsx)(ue,{inner:b,submit:function(e){e.preventDefault();var n=t.id>0?"spelsave/scripts.$[id == ".concat(t.id,"]"):"spelnew/scripts/".concat(t.id),a=new FormData(e.target);i({path:n,form:a,postAction:function(){return u(!0)}})},id:"form-script",type:"application/x-www-form-urlencoded"});return Object(x.jsx)(S,{list:[d,p]})}var ge=function(e){var t=e.db,n=t.scripts,r=Object(a.useState)(),i=Object(j.a)(r,2),c=i[0],o=i[1],s=Object(x.jsx)(te,{link:"#",action:function(){o({id:0,data:{name:""}})}},"new"),l=(null===c||void 0===c?void 0:c.id)>0&&Object(x.jsx)(ne,{app:e,path:"spelremove/scripts/".concat(c.id),action:function(){e.refresh(),o(null)}},"del"),d=Ne(),b=Object(j.a)(d,2),p=b[0],f=(b[1],[Object(x.jsx)(R.a.File,{id:"custom-file",label:"Import script files",custom:!0,multiple:!0,onChange:function(t){t.preventDefault();var n=function(t){var n=t.target,a=n.result;n.postData["data.script"]=a;p({path:"spelnew/scripts/0",data:n.postData}),e.refresh()};Array.from(t.target.files).forEach((function(e){var t=new FileReader;t.onload=n,t.postData={id:0,"data.name":e.name,"data.script":""},t.readAsText(e)}))}}),s,l]),v=Object(x.jsx)(ce,{list:f}),O=n.sort((function(e,t){return t.data.id-e.data.id})).map((function(e){return Object(x.jsx)(he,{model:e,label:e.data.name,action:function(){o(e)}})})),m=Object(x.jsx)(ie,{header:"Scripts",list:O,ip:{variant:"danger"}}),h=Object(x.jsx)(g,{list:[ze({db:t,level:0}),v]}),k="Total: ".concat(null===O||void 0===O?void 0:O.length," scripts(s)!"),P=Object(x.jsx)(S,{list:[h,k]}),w=c&&Object(x.jsx)(Se,Object(u.a)(Object(u.a)({},e),{},{model:c,setScript:o}));return C({left:m,right:{up:P,down:w}})};function ke(e){var t=e.model;return Object(x.jsx)(p.b,{to:"/taskrun/".concat(t.data.id),children:t.data.id})}function Pe(e){var t=e.model,n=S({list:["Output:"]}),a=[{comp:Object(x.jsx)(fe,{list:e.pathList}),label:"Media"},{comp:Object(x.jsx)(pe,{script:(null===t||void 0===t?void 0:t.data.script)||"",name:"data.script"}),label:"Script"}],r=Object(x.jsx)(se,{items:a,id:"ws-content",props:{mountOnEnter:!0}});return Object(x.jsx)(S,{list:[n,r]})}var Ce=function(e){var t,n,r=e.db,i=Object(f.g)().id,c=Re(i,3,e),o=Object(j.a)(c,3),s=(o[0],o[1]),l=o[2],d="FINISH"==(null===l||void 0===l?void 0:l.data.status);Object(a.useEffect)((function(){e.setDb(Object(u.a)(Object(u.a)({},r),{},{curTaskrun:i}))}),[i]);var b=Object(a.useState)(0),p=Object(j.a)(b,2),v=p[0],O=p[1],m=We(),h=Object(j.a)(m,2),g=h[0],k=h[1];Object(a.useEffect)((function(){var e="spelrunresult/".concat(null===s||void 0===s?void 0:s.data.id,"/").concat(null===l||void 0===l?void 0:l.data.id);l&&g({path:e})}),[v]),Object(a.useEffect)((function(){var t=!d&&setInterval((function(){return O((function(e){return e+1}))}),e.config.livePeriod),n=!d&&setInterval(e.refresh,e.config.liveStatusPeriod);return function(){clearInterval(t),clearInterval(n)}}),[d]);var C=Object(x.jsx)(le,{}),w=[C],y=[C,l&&Object(x.jsx)(ne,{app:e,path:"spelremove/taskruns/".concat(l.data.id)},"del")],E=Object(x.jsx)(ce,{list:d?y:w}),T=We(),D=Object(j.a)(T,2),I=D[0],A=D[1],F="Action: ".concat((null===A||void 0===A?void 0:A.data)||"waiting..."),R=null===k||void 0===k||null===(t=k.data.filter((function(e){return null===e||void 0===e?void 0:e.path.endsWith("livestream.json")})).slice().pop())||void 0===t?void 0:t.path;Object(a.useEffect)((function(){!d&&I({path:R,absPath:!0,transform:function(e){return e.text()}})}),[R,v]);var M=A&&Object(x.jsx)(Oe,{path:"".concat(R.replace("livestream.json","element_livestream.png"),"?ts=").concat(v),style:{width:"1000px",height:"auto"}}),L=Object(x.jsx)(S,{list:[M]}),z=Object(x.jsx)(P,{bar:E,up:F,down:L}),H="Status: ".concat((null===l||void 0===l?void 0:l.data.status)||""),W=Object(x.jsx)(Pe,Object(u.a)(Object(u.a)({},e),{},{model:l,pathList:null===k||void 0===k||null===(n=k.data)||void 0===n?void 0:n.filter((function(e){return null===e||void 0===e?void 0:e.path.endsWith("png")}))}));return d?Object(x.jsx)(P,{bar:E,up:H,down:W}):z};function we(e){var t=e.model;return Object(x.jsx)(p.b,{to:"/task/".concat(t.data.id),className:"pure-menu-link",children:t.data.name})}function ye(e){var t=e.model,n=e.curProject,r=Ne(),i=Object(j.a)(r,2),c=i[0],o=i[1],s=Object(a.useState)(!1),l=Object(j.a)(s,2),d=l[0],b=l[1],p=Object(f.f)();Object(a.useEffect)((function(){o&&function(){e.refresh();var t=o.data;(null===t||void 0===t?void 0:t.data)&&(null===p||void 0===p||p.replace("/task/"+t.data.id))}()}),[o]);var v=o&&Object(x.jsx)(be,{title:o.result,show:d,setShow:b}),O=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(je,{name:"data.name",type:"text",tip:"",value:t?t.data.name:"",label:"Task name"}),Object(x.jsx)(je,{name:"data.browser",type:"text",tip:"",value:t?t.data.browser:"",label:"Browser"}),Object(x.jsx)(me,Object(u.a)(Object(u.a)({},e),{},{name:"data.preIds",ids:null===t||void 0===t?void 0:t.data.preIds})),Object(x.jsx)(pe,{script:t?t.data.script:"",name:"data.script"}),Object(x.jsx)(me,Object(u.a)(Object(u.a)({},e),{},{name:"data.postIds",ids:null===t||void 0===t?void 0:t.data.postIds})),Object(x.jsx)(de,{value:"Save"})]}),m=Object(x.jsx)(ue,{type:"pure-form-stacked",inner:O,submit:function(e){e.preventDefault();var a="projects.$[data.id == ".concat(n.data.id,"]"),r=t?"spelsave/".concat(a,".tasks.$[data.id == ").concat(t.data.id,"]"):"spelnew/tasks/".concat(n.data.id),i=new FormData(e.target);c({path:r,form:i,postAction:function(){return b(!0)}})}});return Object(x.jsx)(S,{list:[v,m]})}var Ee=function(e){var t=e.db,n=Object(f.g)().id,r=Re(n,2,e),i=Object(j.a)(r,2),c=i[0],o=i[1];Object(a.useEffect)((function(){c&&e.setDb(Object(u.a)(Object(u.a)({},t),{},{curTask:n}))}),[n]);var s=We(),l=Object(j.a)(s,2),d=l[0],b=l[1],p=Object(f.f)(),v=o&&Object(x.jsx)(oe,{icon:G,label:"Run",link:"#",action:function(){d({path:"spelruntask/".concat(o.data.id,"/admin")})}},"runTask");Object(a.useEffect)((function(){var t=null===b||void 0===b?void 0:b.data;t&&(e.refresh(),t.id&&(null===p||void 0===p||p.push("/taskrun/"+t.id)))}),[b]);var O=[v,o&&Object(x.jsx)(ne,{app:e,path:"spelremove/tasks/".concat(o.data.id),setInput:d},"del")],m=Object(x.jsx)(ce,{list:O}),h=null===o||void 0===o?void 0:o.runList.sort((function(e,t){return t.data.id-e.data.id})).map((function(e){return Object(x.jsx)(ke,{model:e,label:e.data.id})})),k=Object(x.jsx)(ie,{ip:{variant:"danger"},header:"Task runs",list:h}),P=Object(x.jsx)(g,{list:[ze({db:t,level:1}),m]}),w="Total: ".concat((null===h||void 0===h?void 0:h.length)||0," task run(s)!"),y=Object(x.jsx)(S,{list:[P,w]}),E=Object(x.jsx)(ye,Object(u.a)(Object(u.a)({},e),{},{model:o,curProject:c}));return C({left:k,right:{up:y,down:E}})};function Te(e){var t=e.model,n=(e.app,Object(x.jsx)(p.b,{to:"/project/".concat(t.data.id),className:"pure-menu-link",children:t.data.name}));return Object(x.jsx)(g,{list:[n]})}function De(e){var t=e.model,n=Ne(),r=Object(j.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(!1),s=Object(j.a)(o,2),l=s[0],u=s[1],d=Object(f.f)();Object(a.useEffect)((function(){c&&function(){var t=c.data;e.refresh(),(null===t||void 0===t?void 0:t.data)&&(null===d||void 0===d||d.replace("/project/"+t.data.id))}()}),[c]);var b=c&&Object(x.jsx)(be,{title:c.result,show:l,setShow:u}),p=Object(x.jsxs)("div",{children:[Object(x.jsx)(je,{name:"data.name",type:"text",tip:"",value:t?t.data.name:"",label:"Project name"}),Object(x.jsx)(de,{value:"Save"})]}),v=Object(x.jsx)(ue,{inner:p,submit:function(e){e.preventDefault();var n=t?"spelsave/projects.$[data.id == ".concat(t.data.id,"]"):"spelnew/projects",a=new FormData(e.target);i({path:n,form:a,postAction:function(){return u(!0)}})}});return Object(x.jsx)(S,{list:[b,v]})}var Ie=function(e){var t,n,r=e.db,i=Object(f.g)().id,c=Re(i,1,e),o=Object(j.a)(c,1)[0];Object(a.useEffect)((function(){e.setDb(Object(u.a)(Object(u.a)({},r),{},{curPro:i}))}),[i]);var s=[o&&Object(x.jsx)(te,{link:"/task/0"},"new"),o&&Object(x.jsx)(ne,{app:e,path:"spelremove/projects/".concat(o.data.id)},"del")],l=Object(x.jsx)(ce,{list:s}),d=null===o||void 0===o||null===(t=o.tasks)||void 0===t?void 0:t.map((function(e,t){return Object(x.jsx)(we,{model:e,label:e.data.name})})),b=Object(x.jsx)(ie,{ip:{variant:"warning"},header:"Tasks",list:d}),p=Object(x.jsx)(g,{list:[ze({db:r,level:0}),l]}),v="Total: ".concat((null===o||void 0===o||null===(n=o.tasks)||void 0===n?void 0:n.length)||0," task(s)!"),O=Object(x.jsx)(S,{list:[p,v]}),m=Object(x.jsx)(De,Object(u.a)(Object(u.a)({},e),{},{model:o}));return C({left:b,right:{up:O,down:m}})};function Ae(e){var t,n=e.db,a=e.config,r={comp:Object(x.jsx)(te,{link:"/project/0"},"new")},i=Object(x.jsx)(Z,{list:[r],ip:{border:"warning"}}),c=Object(x.jsx)(T.a,{body:!0,children:"Total: ".concat((null===(t=n.projects)||void 0===t?void 0:t.length)||0," project(s)!")}),o=Object(x.jsx)(S,{list:[i,c]}),s=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(je,{name:"aaServer",type:"text",tip:"",value:a.aaServer,label:"AutoAction server",setValue:function(t){e.setConfig(Object(u.a)(Object(u.a)({},a),{},{aaServer:t}))}}),Object(x.jsx)(je,{name:"livePeriod",type:"text",tip:"",value:a.livePeriod,label:"Live period",setValue:function(t){e.setConfig(Object(u.a)(Object(u.a)({},a),{},{livePeriod:t}))}}),Object(x.jsx)(je,{name:"liveStatusPeriod",type:"text",tip:"",value:a.liveStatusPeriod,label:"Live status period",setValue:function(t){e.setConfig(Object(u.a)(Object(u.a)({},a),{},{liveStatusPeriod:t}))}})]}),l=[{comp:o,label:"Workspace"},{comp:Object(x.jsx)(ue,{inner:s}),label:"Config"}];return Object(x.jsx)(se,{items:l,id:"ws-content",activeKey:"Summary"})}var Fe=function(e){var t,n=null===(t=e.db.projects)||void 0===t?void 0:t.map((function(t,n){return Object(x.jsx)(Te,{model:t,app:e,label:t.data.name})})),a=Object(x.jsx)(ie,{header:"Projects",list:n}),r=Object(x.jsx)(ae,{items:[{label:"Scripts",link:"/scripts"}]}),i=Object(x.jsx)(g,{list:[r]}),c=Object(x.jsx)(Ae,Object(u.a)({},e));return C({left:a,right:{up:i,down:c}})};function Re(e,t,n){var a=n.db,r=He(1==t?e:a.curPro,a.projects),i=He(2==t?e:a.curTask,null===r||void 0===r?void 0:r.tasks);return[r,i,He(3==t?e:a.curTaskrun,null===i||void 0===i?void 0:i.runList)]}var Me="/";function Le(e){console.log(e)}function ze(e){var t=e.db,n=e.level,a=[{label:"Home",link:"/"}];return n>0&&a.push({label:"\\Project",link:"/project/"+t.curPro}),n>1&&a.push({label:"\\Task",link:"/task/"+t.curTask}),n>2&&a.push({label:"\\TaskRun",link:"/taskrun/"+t.curTaskrun}),Object(x.jsx)(ae,{items:a})}function He(e,t){return null===t||void 0===t?void 0:t.find((function(t){return t.data.id==e}))}function We(){var e=Object(a.useState)(),t=Object(j.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(),c=Object(j.a)(i,2),o=c[0],s=c[1];return Object(a.useEffect)((function(){var e=((null===n||void 0===n?void 0:n.absPath)?"":Me)+(null===n||void 0===n?void 0:n.path),t=(null===n||void 0===n?void 0:n.transform)||function(e){return e.json()};(null===n||void 0===n?void 0:n.path)&&fetch(e).then((function(e){return t(e)})).then((function(e){n.preAction&&n.preAction(e),s({result:"success",data:e})}),(function(e){s({result:"error",data:{error:e}})})).then((function(){Le("useFetch(): "+e),n.postAction&&n.postAction()}))}),[n]),[r,o]}function Ne(){var e=Object(a.useState)(),t=Object(j.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(),c=Object(j.a)(i,2),o=c[0],u=c[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Le("usePost(): "+(t=Me+n.path)),a=n.form||new URLSearchParams(n.data),e.next=5,b.a.post(t,a).then((function(e){return e.data})).then((function(e){n.preAction&&n.preAction(e),u({result:"success",data:e})}),(function(e){u({result:"error",data:{error:e}})})).then((function(){n.postAction&&n.postAction()}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(null===n||void 0===n?void 0:n.path)&&e()}),[n]),[r,o]}var Ve=function(){var e=Object(a.useState)({projects:[],curPro:null,curTask:null,curTaskrun:null,scripts:[]}),t=Object(j.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(new Date),c=Object(j.a)(i,2),o=c[0],s=c[1],l=Object(a.useState)({aaServer:"/",livePeriod:"5000",liveStatusPeriod:"10000"}),d=Object(j.a)(l,2),b=d[0],v=d[1],O=Object(a.useState)({modal:{title:"",content:"",show:!1,action:function(){}}}),m=Object(j.a)(O,2),h=m[0],S=m[1];Object(a.useEffect)((function(){Me=b.aaServer,s(o+1)}),[b]);var g=We(),k=Object(j.a)(g,2),P=k[0],C=k[1];Object(a.useEffect)((function(){P({path:"spelquery/db"})}),[o]),Object(a.useEffect)((function(){var e;"success"==(null===C||void 0===C?void 0:C.result)&&r(Object(u.a)(Object(u.a)({},n),{},{projects:(e=C.data.projects,e.filter((function(e){var t;return"DELETE"!==(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.status)}))),scripts:C.data.scripts}))}),[C]);var w={setDb:r,db:n,refresh:function(){s(new Date)},config:b,setConfig:v,app:h,setApp:S},y=Object(x.jsx)(Fe,Object(u.a)({},w)),E=Object(x.jsx)(Ie,Object(u.a)({},w)),T=Object(x.jsx)(Ee,Object(u.a)({},w)),D=Object(x.jsx)(Ce,Object(u.a)({},w)),I=Object(x.jsx)(ge,Object(u.a)({},w));return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(p.a,{children:Object(x.jsxs)(f.c,{children:[Object(x.jsxs)(f.a,{exact:!0,path:"/",children:[" ",y," "]}),Object(x.jsxs)(f.a,{path:"/project/:id",children:[" ",E]}),Object(x.jsxs)(f.a,{path:"/task/:id",children:[" ",T," "]}),Object(x.jsxs)(f.a,{path:"/taskrun/:id",children:[" ",D," "]}),Object(x.jsxs)(f.a,{path:"/scripts/",children:[" ",I," "]})]})}),Object(x.jsx)(Y,Object(u.a)({},h.modal))]})},Be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,151)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};n(129);c.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(Ve,{})}),document.getElementById("root")),Be()},92:function(e,t,n){},94:function(e,t,n){}},[[130,1,2]]]);
//# sourceMappingURL=main.a6fa7a16.chunk.js.map